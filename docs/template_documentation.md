# ドキュメント自動整理テンプレート

このファイルは新しいドキュメントを作成・分類する際の動的判断基準とメンテナンス指針を定義します。

## ドキュメント作成標準

**重要**: 特段の指示がない場合、以下の標準に従ってドキュメントを作成してください：

- **言語**: 英語（English）で作成
- **絵文字**: 使用しない（No emojis）
- **日本語版**: 特別な要求がある場合のみ、`_jp`サフィックス付きで作成
- **日付形式**: すべての日付は「yyyy-mm-dd」形式で統一（例: 2025-07-05）

## ファイル・ディレクトリ命名規則

### ファイル命名規則

#### 基本原則

- **小文字とアンダースコア**: すべて小文字、単語間はアンダースコア（\_）で区切る
- **可読性重視**: GitHub での閲覧を考慮した読みやすさ
- **一貫性**: プロジェクト全体で統一された命名

#### 命名パターン

```
[category]_[platform/tool]_[type]_[language].md

例:
- setup_windows_guide.md
- integration_claude_code_tutorial.md
- api_reference_endpoints.md
- troubleshooting_common_issues_jp.md
```

#### ファイルタイプ別命名

- **Setup Guides**: `setup_[platform]_[type].md`

  - setup_windows_guide.md
  - setup_macos_installation.md
  - setup_linux_configuration.md

- **Integration Guides**: `integration_[tool/service]_[type].md`

  - integration_claude_code_basic.md
  - integration_vscode_extension.md
  - integration_api_advanced.md

- **API Documentation**: `api_[category]_[type].md`

  - api_reference_endpoints.md
  - api_authentication_guide.md
  - api_examples_usage.md

- **Tutorials**: `tutorial_[topic]_[level].md`

  - tutorial_getting_started_beginner.md
  - tutorial_advanced_features.md

- **Troubleshooting**: `troubleshooting_[category]_[type].md`
  - troubleshooting_common_issues.md
  - troubleshooting_installation_problems.md

#### 特殊ファイル命名

- **インデックス**: `index.md` (小文字)
- **テンプレート**: `template_[purpose].md`
- **サイトマップ**: `sitemap.md`
- **変更履歴**: `changelog.md`
- **README**: `readme.md` (ルートは大文字 README.md のまま)

#### 言語サフィックス

- **英語**: サフィックスなし（デフォルト）
- **日本語**: `_jp.md`
- **その他**: `_[言語コード].md` (例: `_fr.md`, `_de.md`)

### ディレクトリ命名規則

#### 基本原則

- **小文字**: すべて小文字
- **ハイフン区切り**: 複数単語はハイフン（-）で区切る
- **短縮形**: 明確で短い名前を使用

#### ディレクトリパターン

```
docs/
├── en/                    # 言語コード
├── jp/                    # 言語コード
├── assets/                # リソース
├── templates/             # テンプレート
└── [category]/            # カテゴリ名
```

#### カテゴリ別ディレクトリ命名

- **setup** - セットアップガイド
- **integration** - 統合ガイド
- **api** - API ドキュメント
- **tutorials** - チュートリアル
- **guides** - 一般ガイド
- **reference** - リファレンス
- **troubleshooting** - トラブルシューティング
- **examples** - サンプル・例
- **assets** - 画像・リソース
- **templates** - テンプレートファイル

### 命名規則適用プロンプト

#### 段階的移行プロンプト

既存ファイルを新しい命名規則に移行する場合、以下の段階的アプローチを使用：

**フェーズ 1: 分析と計画**

```
docs/template_documentation.mdで定義された命名規則を参照して、現在のdocsディレクトリを分析し、以下の移行計画を作成してください：

1. 現在のファイル・ディレクトリ一覧の作成
2. 新しい命名規則に基づく標準化されたファイル名の提案
3. ディレクトリ構造の最適化案
4. リンク更新が必要な箇所の特定
5. 移行手順の詳細計画

分析結果をsitemap.mdとして出力してください。
```

**フェーズ 2: 実行**

```
docs/template_documentation.mdの命名規則とフェーズ1で作成した移行計画に従って、以下を実行してください：

1. ファイル名を小文字とアンダースコアに変換
2. ディレクトリ名を小文字とハイフンに標準化
3. 言語サフィックスを統一（_jp）
4. カテゴリ別命名パターンの適用
5. 全インデックスファイルとリンクの更新
6. README.mdのリンク修正
7. sitemap.mdの最終更新

実行後は変更内容の確認レポートを提供してください。
```

#### 一括移行プロンプト

既存の構造を一度に標準化する場合：

```
docs/template_documentation.mdで定義された命名規則と構造標準に従って、現在のdocsディレクトリを完全に再構築してください：

【分析】
1. 現在のファイル・ディレクトリ構造の把握
2. 各ファイルの内容とカテゴリの判定
3. 言語の自動識別

【再構築】
1. 標準化されたディレクトリ構造の作成
2. ファイル名の一括リネーム
3. 適切なカテゴリへのファイル移動
4. インデックスファイルの自動生成

【更新】
1. 全リンクの修正と検証
2. README.mdの更新
3. sitemap.mdの作成
4. 変更履歴の記録

【検証】
1. 命名規則の遵守確認
2. リンク切れのチェック
3. 構造の整合性確認
4. 最終レポートの提供

この再構築により、GitHubでの読みやすさと一貫性を確保してください。
```

#### 段階的検証プロンプト

移行後の品質確認：

```
docs/template_documentation.mdの基準に従って、移行後のdocsディレクトリの品質を検証してください：

【命名規則チェック】
- ファイル名: 小文字+アンダースコア形式
- ディレクトリ名: 小文字+ハイフン形式
- 言語サフィックス: _jp の統一

【構造チェック】
- カテゴリ分類の適切性
- インデックスファイルの存在
- 階層構造の論理性

【リンクチェック】
- 内部リンクの有効性
- README.mdからのリンク
- インデックス間のリンク

【ドキュメント品質】
- 説明文の適切性
- メタデータの完整性
- 統計情報の正確性

検証結果をレポートとして提供し、問題があれば修正案を提示してください。
```

#### 個別ドキュメント移動プロンプト

作成したドキュメントを適切な命名ルールで適切なディレクトリに移動する場合：

```
docs/template_documentation.mdで定義された命名規則に従って、以下のドキュメントを適切なディレクトリに移動してください：

【対象ファイル】
[移動対象のファイルパス]

【分析・実行項目】
1. ファイル内容の分析によるカテゴリ判定
   - setup/ - セットアップ・環境構築関連
   - integration/ - 外部サービス・システム統合
   - guides/ - 使用方法・ガイドライン
   - api/ - API仕様・リファレンス
   - troubleshooting/ - トラブルシューティング
   - reference/ - 技術仕様・リファレンス
   - tutorials/ - チュートリアル・学習教材
   - examples/ - サンプル・例

2. 言語判定と適切なサフィックス付与
   - 日本語コンテンツ: _jp.md
   - 英語コンテンツ: サフィックスなし

3. 命名規則の適用
   - 小文字とアンダースコア形式への変換
   - カテゴリ_詳細_タイプ_言語.md パターンの適用

4. 適切なディレクトリ構造の作成
   - docs/[category]/[language]/ 構造
   - 必要に応じて新規ディレクトリの動的作成

5. ファイル移動の実行
   - mvコマンドによる適切な場所への移動
   - 元の場所からの削除確認

6. 関連ファイルの更新
   - インデックスファイルの差分更新（apply_diffを使用）
   - サイトマップの更新
   - リンク切れの修正

【実行例】
shells/test/backlog/README_update_custom_timestamp.md
↓
docs/guides/guides_tools_backlog_customtimestamp_guide_jp.md

重要: ファイル移動はmvコマンドを使用し、ファイル内容更新はapply_diffまたはwrite_to_fileを使用してください。
```

## 📑 目次

- [自動分類・動的ディレクトリ作成システム](#自動分類動的ディレクトリ作成システム)
- [インデックス自動生成](#インデックス自動生成)
- [分類判断基準](#分類判断基準)
- [言語判定ルール](#言語判定ルール)
- [ファイル命名規則](#ファイル命名規則)
- [使用方法](#使用方法)
- [メンテナンス自動化](#メンテナンス自動化)

## 🤖 自動分類・動的ディレクトリ作成システム

### 基本プロンプト

```
docs/template_documentation.mdを参照して、以下のドキュメントを分析し、適切なディレクトリ構造を動的に作成して整理してください：

[ドキュメント内容または要求]

以下を自動実行してください：
1. 内容を分析してカテゴリを判定
2. 言語を判定（特段の指示がない場合は英語で作成）
3. 必要なディレクトリを動的に作成
4. 適切なファイル名を生成（絵文字なし）
5. インデックスファイルを自動更新

重要: 特段の指示がない限り、英語で作成し、絵文字は使用しないでください。
```

### 動的ディレクトリ構造

#### コンテンツ分析型プロンプト

```
docs/template_documentation.mdを参照して、以下のドキュメント内容を分析し、最適なディレクトリ構造を動的に決定してください：

[ドキュメント内容]

分析・実行項目：
1. 内容キーワード分析（技術、手順、ガイド、API、チュートリアルなど）
2. 対象読者分析（初心者、開発者、管理者など）
3. ドキュメントタイプ判定（セットアップ、統合、リファレンス、トラブルシューティングなど）
4. 適切なカテゴリディレクトリの決定または新規作成
5. 関連ドキュメントとの関係性分析
6. 最適なファイル配置とディレクトリ構造の提案・実行
```

#### 基本構造（必要に応じて拡張）

```
docs/
├── index.md                   # メインインデックス（自動生成）
├── en/                        # 英語ドキュメント
│   ├── index.md              # 英語インデックス（自動生成）
│   ├── [動的カテゴリ]/        # 内容に応じて動的作成
│   │   └── INDEX.md          # カテゴリインデックス
│   └── [動的カテゴリ]/        # 例: setup/, integration/, api/, guides/
│       └── index.md
├── ja/                       # 日本語ドキュメント
│   ├── index.md              # 日本語インデックス（自動生成）
│   ├── [動的カテゴリ]/        # 内容に応じて動的作成
│   │   └── index.md
│   └── [動的カテゴリ]/        # 英語版と同様の構造
│       └── INDEX.md
└── assets/                   # 共通リソース
    ├── [動的リソースタイプ]/   # 内容に応じて動的作成
    └── [動的リソースタイプ]/   # 例: img/, diagrams/, downloads/
```

#### カテゴリ自動判定プロンプト

```
以下のドキュメント内容から適切なカテゴリを自動判定し、必要に応じて新しいディレクトリを作成してください：

[ドキュメント内容]

判定基準：
- セットアップ系 → setup/
- 統合・連携系 → integration/
- 使用方法・ガイド系 → guides/
- API・技術仕様系 → api/
- チュートリアル・学習系 → tutorials/
- リファレンス・辞書系 → reference/
- トラブルシューティング系 → troubleshooting/
- 新規カテゴリが必要な場合 → [適切な新カテゴリ名]/

実行項目：
1. 内容分析によるカテゴリ判定
2. 既存カテゴリとの適合性確認
3. 新規カテゴリ作成の必要性判定
4. ディレクトリ作成とファイル配置
5. インデックスファイルの自動生成・更新
```

## 📑 インデックス自動生成

### メインインデックス作成プロンプト

```
docs/template_documentation.mdを参照して、現在のdocsディレクトリ構造を分析し、以下のインデックスファイルを自動生成してください：

1. docs/index.md - メインインデックス
2. docs/en/index.md - 英語ドキュメントインデックス
3. docs/ja/index.md - 日本語ドキュメントインデックス
4. 各カテゴリのindex.md

各インデックスには以下を含めてください：
- ファイル一覧とその説明
- カテゴリ別整理
- 最終更新日
- クイックリンク

重要: 既存のindex.mdファイルがある場合は、write_to_fileではなくapply_diffを使用して差分更新してください。
```

### インデックス更新プロンプト

```
docs/template_documentation.mdを参照して、既存のindex.mdファイルを差分更新してください：

1. 既存ファイルの内容をread_fileで確認
2. 新しいドキュメントを適切なセクションに追加
3. 最終更新日を現在の日付（yyyy-mm-dd形式）に更新
4. apply_diffを使用して部分的に更新

重要: 既存の構造と内容を保持し、必要な部分のみを更新してください。
全体を書き換える場合のみwrite_to_fileを使用してください。
```

### インデックステンプレート構造

```markdown
# [カテゴリ名] インデックス

最終更新: [yyyy-mm-dd 形式の自動日付]

## 📋 ドキュメント一覧

### [サブカテゴリ 1]

- [ファイル名](相対パス) - [自動生成された説明]

### [サブカテゴリ 2]

- [ファイル名](相対パス) - [自動生成された説明]

## 🔗 クイックリンク

- [関連ドキュメントへのリンク]

## 📊 統計情報

- ドキュメント数: [自動カウント]
- 最新追加: [ファイル名] ([yyyy-mm-dd])
```

## 🎯 分類判断基準

### 自動カテゴリ判定ルール

#### セットアップ (setup/)

**キーワード**: インストール、設定、環境構築、初期化、configure、install、setup

- インストール手順
- 初期設定
- 環境構築
- プラットフォーム固有の設定

#### 統合 (integration/)

**キーワード**: 連携、統合、API、プラグイン、integration、plugin、connector

- 外部ツールとの連携
- API 統合
- プラグイン設定
- 第三者サービス連携

#### ガイド (guides/)

**キーワード**: 使い方、ガイド、チュートリアル、手順、guide、tutorial、howto

- 基本的な使い方
- 高度な機能
- ベストプラクティス
- トラブルシューティング

#### API (api/) - 動的作成

**キーワード**: API、リファレンス、endpoint、request、response

- API リファレンス
- エンドポイント仕様
- レスポンス例

#### チュートリアル (tutorials/) - 動的作成

**キーワード**: チュートリアル、例、サンプル、練習、tutorial、example

- ステップバイステップガイド
- 実践例
- 学習教材

#### リファレンス (reference/) - 動的作成

**キーワード**: リファレンス、仕様、specification、reference、spec

- 技術仕様
- 設定リファレンス
- コマンドリファレンス

## 🌍 言語判定ルール

### 自動言語判定

1. **ファイル名による判定**

   - `_JP`, `_ja`, `_JA` → 日本語
   - `_EN`, `_en` → 英語
   - サフィックスなし → 内容で判定

2. **内容による判定**

   - ひらがな・カタカナ・漢字が含まれる → 日本語
   - 英語のみ → 英語

3. **フォルダ名による判定**
   - `ja/`, `jp/` → 日本語
   - `en/`, `eng/` → 英語

## 🏷️ ファイル命名規則

### 自動命名パターン

```
[カテゴリ]_[詳細]_[バージョン]_[言語].md

例:
- setup_windows_v2_jp.md
- integration_claude_desktop.md
- guide_quick_start_jp.md
- api_reference_v1.md
```

### 特殊ファイル命名

- `index.md` - インデックスファイル
- `README.md` - 概要説明
- `changelog.md` - 変更履歴
- `todo.md` - 作業予定

## 🎯 使用方法

### 新規ドキュメント作成

```
docs/template_documentation.mdを参照して、「[ドキュメントの内容・種類]」のドキュメントを作成してください。

自動実行項目:
1. 内容からカテゴリを自動判定
2. 言語を自動判定
3. 適切なディレクトリを動的作成
4. 標準的なファイル名を生成
5. 関連インデックスファイルを更新
6. README.mdのリンクを更新（必要に応じて）
```

### 既存ドキュメント整理

```
docs/template_documentation.mdを参照して、既存のdocsディレクトリを分析し、以下を実行してください：

1. 全ファイルを自動分類
2. 適切なディレクトリ構造を動的作成
3. ファイルを適切な場所に移動
4. 全インデックスファイルを生成
5. リンク切れを修正
```

## 🔧 メンテナンス自動化

### 定期メンテナンスプロンプト

```
docs/template_documentation.mdを参照して、docsディレクトリの定期メンテナンスを実行してください：

1. 📑 全インデックスファイルの更新
2. 🔗 リンク切れチェックと修正
3. 📊 統計情報の更新
4. 🗂️ 新しいカテゴリの検出と作成
5. 📝 ファイル命名規則の統一
6. 🌍 言語分類の検証
```

### 品質チェック項目

- [ ] 各ディレクトリに INDEX.md が存在
- [ ] ファイル命名規則の遵守
- [ ] 言語分類の正確性
- [ ] リンクの有効性
- [ ] メタデータの完整性

## 📈 拡張可能な構造

新しいドキュメントタイプが追加された場合、以下の手順で自動拡張：

1. **キーワード分析** - 内容からカテゴリを推定
2. **ディレクトリ作成** - 新しいカテゴリディレクトリを動的作成
3. **インデックス生成** - 新カテゴリのインデックスファイル作成
4. **メインインデックス更新** - 上位インデックスに新カテゴリを追加
5. **テンプレート更新** - 本テンプレートに新ルールを追加

この構造により、ドキュメントが増えても自動的に整理され、常に最新のインデックスとリンクが維持されます。

## サイトマップ管理

### サイトマップファイル（sitemap.md）

現在のディレクトリ構造を保持・追跡するために、`sitemap.md`を作成・維持してください：

#### サイトマップ作成プロンプト

```
docs/template_documentation.mdを参照して、現在のdocsディレクトリ構造を分析し、以下の内容を含むsitemap.mdを作成してください：

1. 現在のディレクトリツリー構造（末端ノードにリンク付き）
2. 全ファイルの一覧と説明
3. 命名規則の適用状況
4. ファイル統計情報
5. クイックナビゲーションリンク
6. メンテナンス履歴

ファイル名: sitemap.md（小文字）
形式: 構造化されたMarkdown
更新: ディレクトリ変更時に自動更新

重要: LLM最適化のため、全ての.mdファイルと主要リソースファイルに相対パスリンクを設定してください。
例: [index.md](index.md), [setup_guide.md](en/setup/setup_guide.md)

【ディレクトリ構造の記述方法】
ツリー構造ではなく、クリック可能なリストのインデント形式で記述してください：

**docs/**
- [index.md](index.md) - Main documentation index
- [template_documentation.md](template_documentation.md) - Documentation standards

**setup/**
- [index.md](setup/index.md) - Setup category index
- [setup_local_development_jp.md](setup/setup_local_development_jp.md)
  - **subdirectory/** - Subdirectory description
    - [file.md](setup/subdirectory/file.md) - File description

この形式により、すべてのファイルがクリック可能になり、階層構造も明確に表現されます。
```

#### リンク付きサイトマップ作成プロンプト

```
LLM最適化のため、sitemap.mdのディレクトリ構造図に相対パスリンクを追加してください：

リンク化対象:
1. 全ての.mdファイル（ドキュメント）
2. 主要な画像ファイル（.png, .jpg, .svg）
3. 設定ファイル（.json, .yaml, .toml）
4. 重要なリソースファイル

リンク形式:
- ファイル: [filename.md](relative/path/filename.md)
- 画像: [image.png](assets/img/image.png)
- ディレクトリ: リンクなし（構造表示のみ）

LLM最適化効果:
- 効率的なファイルアクセス
- ナビゲーション時間の短縮
- ワークフロー効率の向上
- ファイル間関係性の明確化
- コンテキスト切り替えの最小化
```

#### サイトマップ更新プロンプト

```
現在のdocsディレクトリ構造を分析し、sitemap.mdを最新の状態に更新してください：

1. 新しいファイル・ディレクトリの追加
2. 削除されたファイルの除去
3. 変更されたファイル名の反映
4. 統計情報の更新
5. 最終更新日の更新（yyyy-mm-dd形式）
```

### サイトマップの役割

- **構造の可視化**: 現在のディレクトリ構造の全体像
- **ナビゲーション**: 目的のファイルへの迅速なアクセス
- **メンテナンス**: 構造変更の追跡と管理
- **標準化確認**: 命名規則の適用状況チェック
- **統計情報**: ファイル数やカテゴリ分布の把握

## LLM 最適化ファイル管理

### llms.txt 作成・更新

LLM がプロジェクト全体を効率的に理解できるよう、ルートディレクトリに`llms.txt`を配置：

#### llms.txt 作成プロンプト

```
プロジェクトのルートディレクトリにLLM向けのコンテキストファイル llms.txt を作成してください：

1. プロジェクト概要とコア機能
2. プロジェクト構造の説明
3. 主要ファイルとディレクトリの役割
4. LLM統合のための主要機能
5. 一般的な使用例
6. クイックスタートガイド
7. ドキュメントナビゲーション
8. LLM最適化ノート

ファイル名: llms.txt（ルートディレクトリ配置）
形式: プレーンテキスト（Markdown）
目的: LLMの効率的なプロジェクト理解支援
```

#### llms.txt 更新プロンプト

```
プロジェクトの変更に合わせて llms.txt を更新してください：

1. 新機能や変更の反映
2. ドキュメント構造の更新
3. 主要ファイルの変更確認
4. 使用例の追加・修正
5. 最終更新日の更新（yyyy-mm-dd形式）

プロジェクトの現在の状態を正確に反映してください。
```

### LLM 最適化の効果

#### SEO 観点

- **間接的効果**: 構造化された情報による検索エンジンの理解向上
- **ユーザビリティ**: ナビゲーション改善による滞在時間向上
- **内部リンク**: 効率的なクローラー巡回

#### LLM 観点

- **コンテキスト理解**: プロジェクト全体の迅速な把握
- **効率的なナビゲーション**: 目的の情報への直接アクセス
- **関係性理解**: ファイル間の依存関係と構造の把握
- **メタデータ活用**: 分類情報による適切な情報提供

### サイトマップ構造例

```markdown
# Documentation Sitemap

## Current Directory Structure

[ディレクトリツリー表示]

## File Summary

[ファイル一覧と説明]

## Statistics

[統計情報]

## Navigation

[クイックリンク]
```

## 多言語サイトマップ管理

### 日本語版サイトマップ作成

日本語読者向けに sitemap_jp.md を作成・管理：

#### 日本語版サイトマップ作成プロンプト

```
sitemap.mdを参考に、日本語版のsitemap_jp.mdを作成してください：

1. 全ての内容を日本語に翻訳
2. 日本語特有の表現への自然な変換
3. ディレクトリ構造図の日本語コメント化
4. 日本語読者向けの説明追加
5. 両言語版への相互リンク設置

ファイル名: sitemap_jp.md
形式: 構造化されたMarkdown（日本語）
更新: sitemap.mdと同期して更新

重要: ファイル更新はshell integrationを使わず、apply_diffまたはwrite_to_fileを使用してください。
```

#### 多言語サイトマップ同期更新プロンプト

```
現在のdocsディレクトリ構造を分析し、sitemap.mdとsitemap_jp.mdの両方を同期更新してください：

1. 英語版（sitemap.md）の更新
2. 日本語版（sitemap_jp.md）の同期更新
3. 統計情報の一致確認
4. 相互リンクの整合性確認
5. 最終更新日の同期（yyyy-mm-dd形式）
6. 内容の整合性確保

重要: ファイル更新はshell integrationを使わず、apply_diffまたはwrite_to_fileを使用してください。
Command Execution Warningを避けるため、ターミナルコマンドでのファイル操作は行わないでください。
```

### 多言語対応の効果

- **グローバルアクセシビリティ**: 複数言語での情報提供
- **LLM 最適化**: 言語別の効率的な情報処理
- **メンテナンス効率**: 同期更新による一貫性保持
- **ユーザビリティ**: 母語での自然な情報理解

## ファイル更新のベストプラクティス

### 推奨更新方法

- ✅ **apply_diff**: 部分的な変更に最適
- ✅ **write_to_file**: 新規作成または全体書き換え
- ❌ **shell integration**: Command Execution Warning が発生

### ファイル操作の使い分け

#### ファイル内容の編集・更新

- **apply_diff**: 既存ファイルの部分的変更
- **write_to_file**: 新規作成または全体書き換え

#### ファイル・ディレクトリ操作

- **touch**: ファイル作成は`touch`コマンド実行
- **cp**: ファイルのコピーは`cp`コマンド実行
- **mv**: ファイル移動は`mv`コマンド実行
- **mkdir**: ディレクトリ作成は`mkdir`コマンド実行

### ファイル更新時の重要な注意事項

```
重要: ファイル更新はshell integrationを使わず、apply_diffまたはwrite_to_fileを使用してください。
Command Execution Warningを避けるため、ファイル内容変更にターミナルコマンドは使用しないでください。

ファイル操作の使い分け:
- ファイル作成: touchコマンド実行
- ファイルコピー: cpコマンド実行
- ファイル移動: mvコマンド実行
- ファイル内容編集: apply_diff または write_to_file
```

#### 更新プロンプトに含める注意書き

全てのファイル更新プロンプトには以下を追記：

```
重要: ファイル内容更新はshell integrationを使わず、apply_diffまたはwrite_to_fileを使用してください。
ファイル操作（作成・コピー・移動）はそれぞれtouch、cp、mvコマンドを実行してください。
```

#### トラブルシューティング

- **Command Execution Warning 発生時**: shell integration を無効化
- **diff editor エラー**: apply_diff を複数回に分割して実行
- **ファイル競合**: read_file 後に即座に apply_diff 実行

### 安全な更新手順

1. **ファイル作成**: `touch`コマンドで空ファイル作成
2. **ファイル読み込み**: `read_file`で現在の内容確認
3. **部分更新**: `apply_diff`で段階的変更
4. **ファイル移動**: `mv`コマンドで必要に応じて移動
5. **検証**: 更新結果の確認
6. **同期**: 関連ファイルの一貫性確保

## ゼロベース ドキュメント再構築プロンプト

### 完全再構築マスタープロンプト

```
docs/template_documentation.mdの命名規則と構造標準に従って、docsディレクトリの完全な再構築を実行してください。

【TODOリスト管理】
以下のTODOリストを docs/restructure_todo.md として作成し、各段階の進捗を管理してください：

## ドキュメント再構築 TODOリスト

### フェーズ1: 分析・調査
- [ ] 1-1. 現在のファイル・ディレクトリ完全一覧の作成
- [ ] 1-2. 各ファイルの内容サンプリング調査（先頭20行読み取り）
- [ ] 1-3. 言語判定（日本語/英語）の実施
- [ ] 1-4. コンテンツ分析によるカテゴリ候補の抽出
- [ ] 1-5. 現在の構造の問題点整理
- [ ] 1-6. 理想的なカテゴリ構造の設計

### フェーズ2: 計画策定
- [ ] 2-1. 標準カテゴリディレクトリの決定
- [ ] 2-2. ファイル分類マトリクスの作成
- [ ] 2-3. リネーム計画表の作成
- [ ] 2-4. 移動計画表の作成
- [ ] 2-5. リンク更新必要箇所の特定
- [ ] 2-6. 作業順序の最適化

### フェーズ3: 実行準備
- [ ] 3-1. バックアップ戦略の確認
- [ ] 3-2. 新ディレクトリ構造の作成
- [ ] 3-3. テンプレートindex.mdファイルの準備
- [ ] 3-4. 作業用スクリプトの準備

### フェーズ4: 実行
- [ ] 4-1. ファイル名の標準化（リネーム）
- [ ] 4-2. ファイルの適切なカテゴリへの移動
- [ ] 4-3. 各カテゴリのindex.md作成
- [ ] 4-4. 全リンクの更新・修正
- [ ] 4-5. サイトマップの更新

### フェーズ5: 検証・完了
- [ ] 5-1. 命名規則遵守の確認
- [ ] 5-2. リンク切れチェック
- [ ] 5-3. 構造整合性の確認
- [ ] 5-4. 最終レポートの作成

【段階的実行】
以下の手順で段階的に実行してください：
```

### フェーズ 1: ゼロベース分析プロンプト

```
【フェーズ1: ドキュメント分析・調査】

docs/template_documentation.mdを参照して、既存ドキュメントのゼロベース分析を実行してください：

## 1-1. 完全ファイル一覧作成
1. docsディレクトリの再帰的ファイル一覧を取得
2. ファイル種別（.md, .png, .tsx等）ごとの分類
3. ファイルサイズと作成日時の記録（yyyy-mm-dd形式）

## 1-2. コンテンツサンプリング調査
各.mdファイルの先頭20行を読み取り、以下を記録：
- ファイルの主要目的・内容
- 対象読者（開発者/運用者/初心者等）
- ドキュメントタイプ（ガイド/仕様/手順/調査等）
- 技術領域（AWS/フロントエンド/API/テスト等）

## 1-3. 言語判定実施
- 日本語要素（ひらがな・カタカナ・漢字）の検出
- 英語ベースファイルの識別
- 混在ファイルの言語比率計算

## 1-4. カテゴリ候補抽出
内容分析から以下の観点でカテゴリを抽出：
- 機能別分類（setup/integration/guides/api/troubleshooting）
- 技術領域別分類（aws/frontend/backend/database）
- 利用段階別分類（getting-started/development/deployment/maintenance）

## 1-5. 問題点整理
- 命名規則違反の特定
- 重複・類似ファイルの検出
- 構造的問題の洗い出し
- アクセシビリティ問題の特定

## 1-6. 理想構造設計
template_documentation.mdの基準に基づく理想的なディレクトリ構造を設計

結果をdocs/analysis_report.mdとして出力し、TODOリストを更新してください。
```

### フェーズ 2: 計画策定プロンプト

```
【フェーズ2: 再構築計画策定】

フェーズ1の分析結果を基に、具体的な再構築計画を策定してください：

## 2-1. 標準カテゴリディレクトリ決定
template_documentation.mdの基準に従い、以下を決定：
- setup/ - セットアップ・環境構築関連
- integration/ - 外部サービス・システム統合
- guides/ - 使用方法・ガイドライン
- api/ - API仕様・リファレンス
- troubleshooting/ - トラブルシューティング
- reference/ - 技術仕様・リファレンス
- [必要に応じて追加カテゴリ]

## 2-2. ファイル分類マトリクス作成
| 現在のファイルパス | カテゴリ | 新ファイル名 | 言語 | 移動先パス |
|-------------------|----------|-------------|------|-----------|
| [各ファイルの詳細マッピング] |

## 2-3. リネーム計画表作成
命名規則違反ファイルの標準化計画：
- 大文字 → 小文字変換
- スペース・ハイフン → アンダースコア変換
- 日本語ファイルへの_jpサフィックス追加

## 2-4. 移動計画表作成
カテゴリ別ファイル移動の詳細計画とバッチ処理順序

## 2-5. リンク更新箇所特定
- README.mdからのリンク
- ドキュメント間の相互リンク
- index.mdファイル内のリンク

## 2-6. 作業順序最適化
依存関係を考慮した最適な実行順序の決定

結果をdocs/restructure_plan.mdとして出力し、TODOリストを更新してください。
```

### フェーズ 3: 実行準備プロンプト

````
【フェーズ3: 実行準備】

再構築計画に基づいて実行準備を行ってください：

## 3-1. バックアップ戦略確認
- 現在の構造のスナップショット作成
- 重要ファイルのバックアップ確認

## 3-2. 新ディレクトリ構造作成
```bash
mkdir -p docs/{setup,integration,guides,api,troubleshooting,reference}
mkdir -p docs/{setup,integration,guides,api,troubleshooting,reference}/{en,jp}
mkdir -p docs/assets/{images,diagrams,downloads}
````

## 3-3. テンプレート index.md 準備

各カテゴリ用の index.md テンプレートを準備

## 3-4. 作業用スクリプト準備

一括リネーム・移動用のコマンド生成

結果を docs/preparation_report.md として出力し、TODO リストを更新してください。

```

### フェーズ4: 実行プロンプト

```

【フェーズ 4: 再構築実行】

準備完了後、以下の順序で再構築を実行してください：

## 4-1. ファイル名標準化（リネーム）

```bash
# 例: 大文字・スペース・ハイフンの修正
mv "docs/AWS Infrastructure.md" "docs/aws_infrastructure.md"
mv "docs/Frontend-Guide.md" "docs/frontend_guide.md"
```

## 4-2. ファイル移動（カテゴリ分類）

計画表に従って各ファイルを適切なカテゴリディレクトリに移動

## 4-3. 各カテゴリ index.md 作成

template_documentation.md の基準に従った index.md を各カテゴリに作成

## 4-4. 全リンク更新・修正

- README.md のリンク更新
- ドキュメント間リンクの修正
- 相対パスの調整

## 4-5. サイトマップ更新

sitemap.md と sitemap_jp.md を新構造に合わせて更新

各ステップ完了後、TODO リストの該当項目にチェックを入れてください。

```

### フェーズ5: 検証・完了プロンプト

```

【フェーズ 5: 検証・完了】

再構築完了後の品質検証を実行してください：

## 5-1. 命名規則遵守確認

- ディレクトリ名: 小文字+ハイフン
- ファイル名: 小文字+アンダースコア
- 日本語ファイル: \_jp サフィックス

## 5-2. リンク切れチェック

- 全.md ファイルの内部リンク検証
- README.md からのリンク確認
- index.md ファイル間のリンク確認

## 5-3. 構造整合性確認

- 各カテゴリの論理性確認
- ファイル分類の適切性確認
- index.md の完整性確認

## 5-4. 最終レポート作成

以下を含む完了レポート（docs/restructure_completion_report.md）を作成：

- 移動・リネームされたファイル一覧
- 新しいディレクトリ構造
- 修正されたリンク一覧
- 品質検証結果
- 残存課題（あれば）

TODO リストの全項目完了確認とアーカイブを実行してください。

```

### 緊急時・ロールバック プロンプト

```

【緊急時対応・ロールバック】

再構築作業中に問題が発生した場合の対応手順：

## 問題発生時の対応

1. 作業を即座に停止
2. 現在の状態を docs/emergency_snapshot.md に記録
3. バックアップからの復旧手順を確認
4. 必要に応じて部分的ロールバックを実行

## ロールバック手順

1. 移動したファイルの元位置への復元
2. リネームしたファイルの元名称への復元
3. 作成した新ディレクトリの適切な処理
4. 変更されたリンクの復旧

重要: shell integration を使わず、apply_diff または write_to_file を使用してファイル操作を行ってください。

```

```
